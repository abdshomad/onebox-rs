<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="Definitions_ServerProcess" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:process id="ServerProcess" isExecutable="false">
    <bpmn:startEvent id="StartEvent_ServerProc" name="Server Initialized" />
    <bpmn:dataObjectReference id="DataObjectReference_ServerConfig" name="ServerConfig" dataObjectRef="DataObject_ServerConfig" />
    <bpmn:dataObject id="DataObject_ServerConfig" />
    <bpmn:task id="Task_ListenConnections" name="Listen for Client Connections">
      <bpmn:dataOutputAssociation id="DataOutputAssociation_1">
        <bpmn:targetRef>DataObjectReference_ServerConfig</bpmn:targetRef>
      </bpmn:dataOutputAssociation>
    </bpmn:task>
    <bpmn:task id="Task_ManageSessions" name="Manage Client Sessions" />
    <bpmn:task id="Task_ReceiveFromClient" name="Receive Packets from Client" />
    <bpmn:task id="Task_DecryptPacket" name="Decrypt &amp; Reassemble Packet" />
    <bpmn:exclusiveGateway id="Gateway_PacketValid" name="Packet Valid?" />
    <bpmn:task id="Task_HandleInvalidPacket" name="Handle Invalid Packet" />
    <bpmn:dataObjectReference id="DataObjectReference_Packet" name="Decrypted Packet" dataObjectRef="DataObject_Packet" />
    <bpmn:dataObject id="DataObject_Packet" />
    <bpmn:task id="Task_ForwardToInternet" name="Forward Packet to Internet">
      <bpmn:dataInputAssociation id="DataInputAssociation_1">
        <bpmn:sourceRef>DataObjectReference_Packet</bpmn:sourceRef>
      </bpmn:dataInputAssociation>
    </bpmn:task>
    <bpmn:task id="Task_ReceiveFromInternet" name="Receive Response from Internet" />
    <bpmn:task id="Task_ForwardToClient" name="Encrypt &amp; Forward Response to Client" />
    <bpmn:endEvent id="EndEvent_ServerProc" name="Server Stopped" />
    <bpmn:sequenceFlow id="SequenceFlow_1" sourceRef="StartEvent_ServerProc" targetRef="Task_ListenConnections" />
    <bpmn:sequenceFlow id="SequenceFlow_2" sourceRef="Task_ListenConnections" targetRef="Task_ManageSessions" />
    <bpmn:sequenceFlow id="SequenceFlow_3" sourceRef="Task_ManageSessions" targetRef="Task_ReceiveFromClient" />
    <bpmn:sequenceFlow id="SequenceFlow_4" sourceRef="Task_ReceiveFromClient" targetRef="Task_DecryptPacket" />
    <bpmn:sequenceFlow id="SequenceFlow_5" sourceRef="Task_DecryptPacket" targetRef="Gateway_PacketValid" />
    <bpmn:sequenceFlow id="SequenceFlow_PacketInvalid" name="No" sourceRef="Gateway_PacketValid" targetRef="Task_HandleInvalidPacket" />
    <bpmn:sequenceFlow id="SequenceFlow_PacketOK" name="Yes" sourceRef="Gateway_PacketValid" targetRef="Task_ForwardToInternet" />
    <bpmn:sequenceFlow id="SequenceFlow_6" sourceRef="Task_ForwardToInternet" targetRef="Task_ReceiveFromInternet" />
    <bpmn:sequenceFlow id="SequenceFlow_7" sourceRef="Task_ReceiveFromInternet" targetRef="Task_ForwardToClient" />
    <bpmn:sequenceFlow id="SequenceFlow_8" sourceRef="Task_ForwardToClient" targetRef="EndEvent_ServerProc" />
    <bpmn:sequenceFlow id="SequenceFlow_9" sourceRef="Task_HandleInvalidPacket" targetRef="Task_ReceiveFromClient" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_ServerProcess">
    <bpmndi:BPMNPlane id="BPMNPlane_ServerProcess" bpmnElement="ServerProcess">
      <bpmndi:BPMNShape id="StartEvent_ServerProc_Shape" bpmnElement="StartEvent_ServerProc">
        <dc:Bounds x="179" y="159" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ListenConnections_Shape" bpmnElement="Task_ListenConnections">
        <dc:Bounds x="270" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataObjectReference_ServerConfig_Shape" bpmnElement="DataObjectReference_ServerConfig">
        <dc:Bounds x="302" y="255" width="36" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="287" y="312" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataOutputAssociation_1_Edge" bpmnElement="DataOutputAssociation_1">
        <di:waypoint x="320" y="217" />
        <di:waypoint x="320" y="255" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_ManageSessions_Shape" bpmnElement="Task_ManageSessions">
        <dc:Bounds x="430" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ReceiveFromClient_Shape" bpmnElement="Task_ReceiveFromClient">
        <dc:Bounds x="590" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_DecryptPacket_Shape" bpmnElement="Task_DecryptPacket">
        <dc:Bounds x="750" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_PacketValid_Shape" bpmnElement="Gateway_PacketValid" isMarkerVisible="true">
        <dc:Bounds x="905" y="152" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="903" y="209" width="55" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_HandleInvalidPacket_Shape" bpmnElement="Task_HandleInvalidPacket">
        <dc:Bounds x="880" y="250" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ForwardToInternet_Shape" bpmnElement="Task_ForwardToInternet">
        <dc:Bounds x="1010" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="DataObjectReference_Packet_Shape" bpmnElement="DataObjectReference_Packet">
        <dc:Bounds x="942" y="255" width="36" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="927" y="312" width="66" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="DataInputAssociation_1_Edge" bpmnElement="DataInputAssociation_1">
        <di:waypoint x="960" y="255" />
        <di:waypoint x="960" y="217" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Task_ReceiveFromInternet_Shape" bpmnElement="Task_ReceiveFromInternet">
        <dc:Bounds x="1170" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Task_ForwardToClient_Shape" bpmnElement="Task_ForwardToClient">
        <dc:Bounds x="1330" y="137" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EndEvent_ServerProc_Shape" bpmnElement="EndEvent_ServerProc">
        <dc:Bounds x="1492" y="159" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="SequenceFlow_1_Edge" bpmnElement="SequenceFlow_1">
        <di:waypoint x="215" y="177" />
        <di:waypoint x="270" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_2_Edge" bpmnElement="SequenceFlow_2">
        <di:waypoint x="370" y="177" />
        <di:waypoint x="430" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_3_Edge" bpmnElement="SequenceFlow_3">
        <di:waypoint x="530" y="177" />
        <di:waypoint x="590" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_4_Edge" bpmnElement="SequenceFlow_4">
        <di:waypoint x="690" y="177" />
        <di:waypoint x="750" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_5_Edge" bpmnElement="SequenceFlow_5">
        <di:waypoint x="850" y="177" />
        <di:waypoint x="905" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_PacketInvalid_Edge" bpmnElement="SequenceFlow_PacketInvalid">
        <di:waypoint x="930" y="202" />
        <di:waypoint x="930" y="250" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="938" y="223" width="15" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_PacketOK_Edge" bpmnElement="SequenceFlow_PacketOK">
        <di:waypoint x="955" y="177" />
        <di:waypoint x="1010" y="177" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="977" y="159" width="20" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_6_Edge" bpmnElement="SequenceFlow_6">
        <di:waypoint x="1110" y="177" />
        <di:waypoint x="1170" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_7_Edge" bpmnElement="SequenceFlow_7">
        <di:waypoint x="1270" y="177" />
        <di:waypoint x="1330" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_8_Edge" bpmnElement="SequenceFlow_8">
        <di:waypoint x="1430" y="177" />
        <di:waypoint x="1492" y="177" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="SequenceFlow_9_Edge" bpmnElement="SequenceFlow_9">
        <di:waypoint x="880" y="290" />
        <di:waypoint x="640" y="290" />
        <di:waypoint x="640" y="217" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
